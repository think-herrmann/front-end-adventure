components:
  build:
    image: 379580035154.dkr.ecr.eu-west-2.amazonaws.com/axon/components
    dockerfile_path: Dockerfile
  working_dir: "/home/app"
  cached: true
  dockercfg_service: awsGenerator
awsGenerator:
  image: codeship/aws-ecr-dockercfg-generator
  encrypted_env_file: aws_creds.encrypted # contains Secret, AccessKey and Region
  add_docker: true
axon-k8s:
  image: 379580035154.dkr.ecr.eu-west-2.amazonaws.com/axon/k8s:master
  encrypted_env_file: aws_creds.encrypted # contains Secret, AccessKey and Region
  dockercfg_service: awsGenerator
  volumes:
    - ./charts:/app
  environment:
    - ENV_FROM_AWS=1
    - GENERATE_KUBECONF=1
    - ENV=production
